webpackJsonp([1],{"7zck":function(e,t){},"8h/0":function(e,t){},HMLi:function(e,t,r){(e.exports=r("FZ+f")(!1)).push([e.i,"\n.app-header[data-v-0d35a2f4] {\n  height: 60px;\n}\n",""])},JcAr:function(e,t){},"K/h2":function(e,t){},L5Ei:function(e,t,r){var n=r("HMLi");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);r("rjj0")("4b06d4d9",n,!0,{})},LcIj:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("7+uW"),i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",{staticClass:"hidden-xs-only",attrs:{type:"flex",justify:"center"}},[r("el-menu",{attrs:{"default-active":"1",router:!0,mode:"horizontal"}},[r("el-menu-item",{attrs:{index:"1",route:"/"}},[e._v("ReHigh Store")]),e._v(" "),r("el-submenu",{attrs:{index:"2"}},[r("template",{slot:"title"},[e._v(" Categori ")]),e._v(" "),r("el-menu-item",{attrs:{index:"2-1",route:"/man"}},[e._v("   Man   ")]),e._v(" "),r("el-menu-item",{attrs:{index:"2-2",route:"/women"}},[e._v(" Women ")]),e._v(" "),r("el-menu-item",{attrs:{index:"2-3",route:"/kids"}},[e._v("  Kids  ")])],2),e._v(" "),r("el-menu-item",{attrs:{index:"3",route:"/info"}},[e._v("   Info   ")]),e._v(" "),r("el-menu-item",{attrs:{index:"4",route:"/orders"}},[e._v(" Orders ")]),e._v(" "),r("el-submenu",{attrs:{index:"5"}},[r("template",{slot:"title"},[e._v(" User ")]),e._v(" "),this.isAuthenticatedUser?r("el-menu-item",{attrs:{index:"5-1",route:"/account"}},[e._v("\n         Account\n        ")]):e._e(),e._v(" "),this.isAuthenticatedUser?e._e():r("el-menu-item",{attrs:{index:"5-2",route:"/signin"}},[e._v("\n          Sign in\n        ")]),e._v(" "),this.isAuthenticatedUser?e._e():r("el-menu-item",{attrs:{index:"5-3",route:"/signup"}},[e._v("\n          Sign up\n        ")]),e._v(" "),this.isAuthenticatedUser?r("el-menu-item",{attrs:{index:"5-4",route:"/logout"},on:{click:e.onLogout}},[e._v(" Logout  ")]):e._e()],2)],1)],1),e._v(" "),r("v-toolbar",{staticClass:"hidden-sm-and-up primary white--text"},[r("v-toolbar-side-icon",{staticClass:"hidden-sm-and-up white--text",on:{click:function(t){e.sideNav=!e.sideNav}}}),e._v(" "),r("h2",[e._v("ReHigh Store")])],1),e._v(" "),r("v-navigation-drawer",{attrs:{temporary:"",absolute:"",height:"100vh"},model:{value:e.sideNav,callback:function(t){e.sideNav=t},expression:"sideNav"}},[r("v-list",e._l(e.menuItems,function(t){return r("v-list-tile",{key:t.title,attrs:{to:t.link}},[r("v-list-tile-action",[r("v-icon",[e._v(e._s(t.icon))])],1),e._v(" "),r("v-list-tile-content",[e._v(e._s(t.title))])],1)}))],1)],1)},staticRenderFns:[]};var o={components:{AppHeader:r("VU/8")({data:function(){return{sideNav:!1,menuItems:[{title:"Home",link:"/",icon:"home"},{title:"Category",link:"/about",icon:"list"},{title:"Info",link:"/info",icon:"info"},{title:"Orders",link:"/services",icon:"loyalty"},{title:"Sing in",link:"/signin",icon:"perm_identity"}]}},methods:{onLogout:function(){this.$store.dispatch("logout")}}},i,!1,function(e){r("L5Ei")},"data-v-0d35a2f4",null).exports},name:"App"},s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",{attrs:{id:"app"}},[t("app-header"),this._v(" "),t("transition",{attrs:{name:"fade"}},[t("router-view")],1)],1)},staticRenderFns:[]};var a=r("VU/8")(o,s,!1,function(e){r("nrQ2")},null,null).exports,l=r("/ocq"),u=r("Sazm"),c={name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App",checked:!0}},methods:{getFBData:function(){var e=this;u.database().ref("books").once("value").then(function(t){e.msg=t.val()}).catch(function(t){e.msg=t})}}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"hello"},[r("h1",[e._v("Hello")]),e._v(" "),r("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("Option")]),e._v(" "),r("el-button",{on:{click:e.getFBData}},[e._v("getFBData")]),e._v("\n  "+e._s(e.msg)+"\n")],1)},staticRenderFns:[]};var m=r("VU/8")(c,d,!1,function(e){r("y7A0")},"data-v-3ad46f33",null).exports,f={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Hello from info")]),e._v(" "),r("h1",[e._v("Hello from info")]),e._v(" "),r("h1",[e._v("Hello from info")]),e._v(" "),r("h1",[e._v("Hello from info")]),e._v(" "),r("h1",[e._v("Hello from info")])])}]};var p=r("VU/8")({name:"info"},f,!1,function(e){r("LcIj")},"data-v-70c2f4a0",null).exports,v={name:"signin",data:function(){var e=this;return{formRule:{password:"",checkPass:"",email:""},rules:{password:[{validator:function(t,r,n){""===r?n(new Error("Please input the password")):(""!==e.formRule.checkPass&&e.$refs.formRule.validateField("checkPass"),n())},trigger:"blur"}],email:[{validator:function(t,r,n){if(!r)return n(new Error("Please input the Email"));setTimeout(function(){e.isValidEmail(r)?n():n(new Error("Email is not valid"))},1e3)},trigger:"blur"}]},submitCount:0}},computed:{user:function(){return this.$store.getters.user},error:function(){return this.$store.getters.error}},watch:{user:function(e){null!==e&&void 0!==e&&this.$router.push("/account")}},methods:{submitForm:function(e){var t=this;this.submitCount++,this.$refs[e].validate(function(e){if(!e)return t.$store.dispatch("setError",{message:"Please, fill in the fields correctly"});t.$store.dispatch("signUserIn",{email:t.formRule.email,password:t.formRule.password})})},clearForm:function(e){this.$refs[e].resetFields()},isValidEmail:function(e){return/^\S+@\S+\.\S+$/.test(e)},resetPassword:function(){var e=document.getElementById("email").value;console.log(e),this.$store.dispatch("resetPassword",e)}}},h={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[this.isLoading?r("v-container",[r("app-loader")],1):e._e(),e._v(" "),this.isLoading?e._e():r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{xs:24,sm:14,md:12,lg:10,xl:8}},[e.error?r("app-alert",{attrs:{text:e.error.message}}):e._e(),e._v(" "),r("el-card",[r("h2",[e._v("Sign in")]),e._v(" "),r("v-container",[r("el-form",{ref:"formRule",attrs:{model:e.formRule,"status-icon":"",rules:e.rules,"auto-complete":"on"}},[r("el-form-item",{attrs:{label:"Email",prop:"email"}},[r("el-input",{attrs:{type:"email",id:"email",autofocus:!0,"auto-complete":"on"},model:{value:e.formRule.email,callback:function(t){e.$set(e.formRule,"email",t)},expression:"formRule.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Password",prop:"password"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.formRule.password,callback:function(t){e.$set(e.formRule,"password",t)},expression:"formRule.password"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",disabled:this.isLoading},on:{click:function(t){e.submitForm("formRule")}}},[e._v("Sign In")]),e._v(" "),r("el-button",{on:{click:function(t){e.clearForm("formRule")}}},[e._v("Clear")])],1),e._v(" "),e.submitCount>2?r("div",[r("p",[e._v("Forgot password?")]),e._v(" "),r("el-button",{attrs:{type:"success"},on:{click:e.resetPassword}},[e._v("Reset password")])],1):e._e()],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var g=r("VU/8")(v,h,!1,function(e){r("K/h2")},"data-v-075ec094",null).exports,_={name:"signin",data:function(){var e=this;return{formRule:{password:"",checkPass:"",email:""},rules:{password:[{validator:function(t,r,n){""===r?n(new Error("Please input the password")):r.length<6?n(new Error("Password should be at least 6 characters")):(""!==e.formRule.checkPass&&e.$refs.formRule.validateField("checkPass"),n())},trigger:"blur"}],checkPass:[{validator:function(t,r,n){""===r?n(new Error("Please input the password again")):r!==e.formRule.password?n(new Error("Two inputs don't match!")):n()},trigger:"blur"}],email:[{validator:function(t,r,n){if(!r)return n(new Error("Please input the Email"));setTimeout(function(){e.isValidEmail(r)?n():n(new Error("Email is not valid"))},1e3)},trigger:"blur"}]}}},computed:{user:function(){return this.$store.getters.user},error:function(){return this.$store.getters.error},loading:function(){return this.$store.getters.loading}},watch:{user:function(e){null!==e&&void 0!==e&&this.$router.push("/account")}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$store.dispatch("setError",{message:"Please, fill in the fields correctly"});t.$store.dispatch("signUserUp",{email:t.formRule.email,password:t.formRule.password})})},clearForm:function(e){this.$refs[e].resetFields()},isValidEmail:function(e){return/^\S+@\S+\.\S+$/.test(e)}}},b={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{xs:24,sm:14,md:12,lg:10,xl:8}},[e.error?r("app-alert",{attrs:{text:e.error.message}}):e._e(),e._v(" "),r("el-card",[r("h2",[e._v("Sign up")]),e._v(" "),r("v-container",[r("el-form",{ref:"formRule",attrs:{model:e.formRule,"status-icon":"",rules:e.rules,"auto-complete":"on"}},[r("el-form-item",{attrs:{label:"Email",prop:"email"}},[r("el-input",{attrs:{type:"email",autofocus:!0,"auto-complete":"on"},model:{value:e.formRule.email,callback:function(t){e.$set(e.formRule,"email",t)},expression:"formRule.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Password",prop:"password"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.formRule.password,callback:function(t){e.$set(e.formRule,"password",t)},expression:"formRule.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Confirm",prop:"checkPass"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.formRule.checkPass,callback:function(t){e.$set(e.formRule,"checkPass",t)},expression:"formRule.checkPass"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",disabled:e.loading},on:{click:function(t){e.submitForm("formRule")}}},[e._v("Sign up")]),e._v(" "),r("el-button",{on:{click:function(t){e.clearForm("formRule")}}},[e._v("Clear")])],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var w=r("VU/8")(_,b,!1,function(e){r("ftHw")},"data-v-443d0a6b",null).exports,x={name:"Account",computed:{isVerifiedEmail:function(){if(this.$store.getters.user)return console.log(this.$store.getters.user.emailVerified),this.$store.getters.user.emailVerified}}},E={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.isLoading?t("v-container",[t("app-loader")],1):t("div",[this.isVerifiedEmail?t("div",[this._v("\n      Welcome to personal Account\n     ")]):t("div",[t("h2",[this._v("Confirm your email")])])])],1)},staticRenderFns:[]};var y=r("VU/8")(x,E,!1,function(e){r("xTQj")},"data-v-2d9219e8",null).exports,R=r("NYxO"),k=r("uqrR"),$=r.n(k),L={state:{user:null,isAdmin:!1},mutations:{registerUserForMeetup:function(e,t){var r=t.id;e.user.registeredMeetups.findIndex(function(e){return e.id===r})>=0||(e.user.registeredMeetups.push(r),e.user.fbKeys[r]=t.fbKey)},unregisterUserFromMeetup:function(e,t){var r=e.user.registeredMeetups;r.splice(r.findIndex(function(e){return e.id===t}),1),$()(e.user.fbKeys,t)},setUser:function(e,t){e.user=t,console.log(t.user)},setAdmin:function(e,t){e.isAdmin=t}},actions:{registerUserForMeetup:function(e,t){var r=e.commit,n=e.getters;r("setLoading",!0);var i=n.user;u.database().ref("/users/"+i.id).child("/registrations/").push(t).then(function(e){r("setLoading",!1),r("registerUserForMeetup",{id:t,fbKey:e.key})}).catch(function(e){console.log(e),r("setLoading",!1)})},unregisterUserFromMeetup:function(e,t){var r=e.commit,n=e.getters;r("setLoading",!0);var i=n.user;if(i.fbKeys){var o=i.fbKeys[t];u.database().ref("/users/"+i.id+"/registrations/").child(o).remove().then(function(){r("setLoading",!1),r("unregisterUserFromMeetup",t)}).catch(function(e){console.log(e),r("setLoading",!1)})}},signUserUp:function(e,t){var r=e.commit;r("setLoading",!0),r("clearError"),u.auth().createUserAndRetrieveDataWithEmailAndPassword(t.email,t.password).then(function(e){r("setLoading",!1),r("clearError");var n={id:e.uid,registeredMeetups:[],fbKeys:{},emailVerified:t.emailVerified};r("setUser",n),u.auth().currentUser.sendEmailVerification().then(function(){alert("Email Verification Sent!")})}).catch(function(e){r("setLoading",!1),r("setError",e),console.log(e)})},signUserIn:function(e,t){var r=e.commit;u.auth().currentUser&&u.auth().signOut(),r("setLoading",!0),r("clearError"),u.auth().signInAndRetrieveDataWithEmailAndPassword(t.email,t.password).then(function(e){r("setLoading",!1),r("clearError");var n={id:e.uid,registeredMeetups:[],fbKeys:{},emailVerified:t.emailVerified};r("setUser",n),console.log("Succesful login")}).catch(function(e){r("setLoading",!1),r("setError",e),console.log(e)});var n=u.auth().currentUser;null!=n&&n.providerData.forEach(function(e){"montessoriberdsk@gmail.com"===e.email?r("setAdmin",!0):r("setAdmin",!1)})},autoSignIn:function(e,t){var r=e.commit;r("clearError"),r("setLoading",!0),r("setUser",{id:t.uid,registeredMeetups:[],fbKeys:{},emailVerified:t.emailVerified}),r("setLoading",!1);null!=t&&t.providerData.forEach(function(e){"montessoriberdsk@gmail.com"===e.email?r("setAdmin",!0):r("setAdmin",!1)})},resetPassword:function(e,t){e.commit;u.auth().sendPasswordResetEmail(t).then(function(){alert("Password Reset Email Sent!")}).catch(function(e){var t=e.code,r=e.message;"auth/invalid-email"===t?alert(r):"auth/user-not-found"===t&&alert(r),console.log(e)})},fetchUserData:function(e){var t=e.commit,r=e.getters;t("setLoading",!0),u.database().ref("/users/"+r.user.id+"/registrations/").once("value").then(function(e){var n=e.val(),i=[],o={};for(var s in n)i.push(n[s]),o[n[s]]=s;var a={id:r.user.id,registeredMeetups:i,fbKeys:o,emailVerified:r.user.emailVerified};t("setLoading",!1),t("setUser",a)}).catch(function(e){t("setLoading",!1),console.log(e)})},logout:function(e){var t=e.commit;t("setLoading",!0),u.auth().signOut().then(function(){t("setUser",null),t("setLoading",!1)}).catch(function(e){console.log(e),t("setLoading",!1)})}},getters:{user:function(e){return e.user},isAdmin:function(e){return e.isAdmin}}};n.default.use(R.a);var U=new R.a.Store({modules:{user:L,shared:{state:{loading:!1,error:null},mutations:{setLoading:function(e,t){e.loading=t},setError:function(e,t){e.error=t},clearError:function(e){e.error=null}},actions:{clearError:function(e){(0,e.commit)("clearError")},setError:function(e,t){(0,e.commit)("setError",t)},setLoading:function(e,t){(0,e.commit)("setLoading",t)}},getters:{loading:function(e){return e.loading},error:function(e){return e.error}}}}}),A=function(e,t,r){U.getters.user?r():r("/signin")};n.default.use(l.a);var F=new l.a({routes:[{path:"/",name:"home",component:m},{path:"/signin",name:"signin",component:g},{path:"/signup",name:"signup",component:w},{path:"/account",name:"account",component:y,beforeEnter:A},{path:"/logout",name:"logout",beforeEnter:A},{path:"/info",name:"info",component:p}],mode:"history"}),P=r("zL8q"),V=r.n(P),S=r("3EgV"),I=r.n(S),H=(r("tvR6"),r("7zck"),{computed:{isAuthenticatedUser:function(){return null!==U.getters.user&&void 0!==U.getters.user},isAdmin:function(){return this.$store.getters.isAdmin}}}),M={computed:{isLoading:function(){return U.getters.loading}}},C={render:function(){var e=this.$createElement;return(this._self._c||e)("el-alert",{attrs:{title:"Error",type:"error",description:this.text,"show-icon":""}})},staticRenderFns:[]};var D=r("VU/8")({name:"alert",props:["text"],methods:{onClose:function(){this.$emit("dismissed")}}},C,!1,function(e){r("8h/0")},"data-v-de89b0da",null).exports,K={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:!0,expression:"true",modifiers:{fullscreen:!0}}]})},staticRenderFns:[]},j=r("VU/8")(null,K,!1,null,null,null).exports,N={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-tooltip",{attrs:{bottom:""}},[t("v-btn",{attrs:{slot:"activator",light:"",flat:"",fab:"",color:"white"},slot:"activator"},[t("v-icon",[this._v("lightbulb_outline")])],1),this._v(" "),t("p",{staticClass:"text-xs-center"},[t("br"),this._v("\n    Если у вас возникли технические проблемы,"),t("br"),this._v("\n    напишите пожалуйста в отдел разработки на почту:"),t("br"),this._v("\n    SmelayaPandaGM@gmail.com")])],1)},staticRenderFns:[]};var z=r("VU/8")({name:"help-tooltip",data:function(){return{show:!1}}},N,!1,function(e){r("JcAr")},"data-v-d4a4c0ec",null).exports;n.default.mixin(H),n.default.mixin({computed:{imageHeight:function(){switch(this.$vuetify.breakpoint.name){case"xs":return"150px";case"sm":return"200px";case"md":return"250px";case"lg":return"300px";case"xl":return"400px"}}}}),n.default.mixin(M),n.default.mixin({data:function(){return{appMail:"montessoriberdsk@gmail.com"}}}),n.default.filter("date",function(e){return new Date(e).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric",timezone:"UTC"})}),n.default.filter("admin_date",function(e){return new Date(e).toLocaleString("ru",{month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric"})}),n.default.filter("snippet",function(e,t){return e.length>t?e.slice(0,t)+" . . .":e}),n.default.component("app-alert",D),n.default.component("app-loader",j),n.default.component("app-help-tooltip",z),n.default.use(V.a),n.default.use(I.a,{theme:{primary:"#409EFF",secondary:"#2c3e50",success:"#67c23a",warning:"#e6a23c",danger:"#f56c6c",info:"#909399"}}),n.default.config.productionTip=!1;var W=void 0;W={apiKey:"AIzaSyDWYuL9ChkfHkLiINoz7ZdDuQntk4eWrI8",authDomain:"e-store-dev.firebaseapp.com",databaseURL:"https://e-store-dev.firebaseio.com",projectId:"e-store-dev",storageBucket:"e-store-dev.appspot.com",messagingSenderId:"252391298748"},new n.default({el:"#app",router:F,store:U,components:{App:a},template:"<App/>",created:function(){var e=this;u.initializeApp(W),u.auth().onAuthStateChanged(function(t){t&&(e.$store.dispatch("autoSignIn",t),e.$store.dispatch("fetchUserData"))})}})},ftHw:function(e,t){},nrQ2:function(e,t){},tvR6:function(e,t){},xTQj:function(e,t){},y7A0:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.57004b218ecd4b1977ee.js.map